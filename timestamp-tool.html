<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Timestamp Workshop</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=IBM+Plex+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg-primary: #0a0e14;
    --bg-secondary: #111820;
    --bg-card: #151d28;
    --bg-input: #0d1219;
    --border: #1e2a3a;
    --border-focus: #3d8fd6;
    --text-primary: #d4dce8;
    --text-secondary: #6b7d95;
    --text-muted: #3d4f63;
    --accent-blue: #3d8fd6;
    --accent-cyan: #56d4c8;
    --accent-amber: #e8a838;
    --accent-green: #5ccb6f;
    --accent-red: #e85454;
    --accent-purple: #a78bfa;
    --glow-blue: rgba(61, 143, 214, 0.15);
    --glow-cyan: rgba(86, 212, 200, 0.1);
    --radius: 8px;
    --radius-lg: 12px;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'IBM Plex Sans', sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Subtle grid background */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background:
      linear-gradient(var(--border) 1px, transparent 1px),
      linear-gradient(90deg, var(--border) 1px, transparent 1px);
    background-size: 60px 60px;
    opacity: 0.15;
    pointer-events: none;
    z-index: 0;
  }

  .app {
    position: relative;
    z-index: 1;
    max-width: 1100px;
    margin: 0 auto;
    padding: 32px 24px 64px;
  }

  /* Header */
  .header {
    text-align: center;
    margin-bottom: 40px;
    animation: fadeIn 0.6s ease;
  }

  .header h1 {
    font-family: 'JetBrains Mono', monospace;
    font-size: 28px;
    font-weight: 600;
    letter-spacing: -0.5px;
    color: var(--text-primary);
    margin-bottom: 6px;
  }

  .header h1 span {
    color: var(--accent-cyan);
  }

  .header p {
    color: var(--text-secondary);
    font-size: 14px;
    font-weight: 300;
  }

  /* Live Clock */
  .live-clock {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 28px 32px;
    margin-bottom: 28px;
    text-align: center;
    position: relative;
    overflow: hidden;
    animation: slideUp 0.5s ease;
  }

  .live-clock::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--accent-cyan), var(--accent-blue), transparent);
  }

  .clock-label {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--text-muted);
    margin-bottom: 12px;
    font-weight: 500;
  }

  .clock-unix {
    font-family: 'JetBrains Mono', monospace;
    font-size: 42px;
    font-weight: 700;
    color: var(--accent-cyan);
    letter-spacing: 1px;
    text-shadow: 0 0 30px var(--glow-cyan);
    line-height: 1.1;
    margin-bottom: 10px;
  }

  .clock-human {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    color: var(--text-secondary);
    letter-spacing: 0.5px;
  }

  .clock-formats {
    display: flex;
    gap: 16px;
    justify-content: center;
    margin-top: 16px;
    flex-wrap: wrap;
  }

  .clock-chip {
    background: var(--bg-input);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 6px 12px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s;
    user-select: none;
  }

  .clock-chip:hover {
    border-color: var(--accent-blue);
    color: var(--text-primary);
    background: rgba(61, 143, 214, 0.08);
  }

  .clock-chip .chip-label {
    color: var(--text-muted);
    margin-right: 6px;
  }

  /* Tool Grid */
  .tool-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 28px;
  }

  @media (max-width: 768px) {
    .tool-grid { grid-template-columns: 1fr; }
    .clock-unix { font-size: 28px; }
  }

  .card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 24px;
    position: relative;
    transition: border-color 0.3s;
    animation: slideUp 0.5s ease both;
  }

  .card:nth-child(1) { animation-delay: 0.1s; }
  .card:nth-child(2) { animation-delay: 0.15s; }
  .card:nth-child(3) { animation-delay: 0.2s; }
  .card:nth-child(4) { animation-delay: 0.25s; }

  .card:hover {
    border-color: rgba(61, 143, 214, 0.3);
  }

  .card-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 18px;
  }

  .card-icon {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 15px;
    flex-shrink: 0;
  }

  .card-icon.blue { background: rgba(61, 143, 214, 0.12); color: var(--accent-blue); }
  .card-icon.amber { background: rgba(232, 168, 56, 0.12); color: var(--accent-amber); }
  .card-icon.green { background: rgba(92, 203, 111, 0.12); color: var(--accent-green); }
  .card-icon.purple { background: rgba(167, 139, 250, 0.12); color: var(--accent-purple); }

  .card-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-primary);
  }

  .card-subtitle {
    font-size: 11px;
    color: var(--text-muted);
    font-weight: 400;
  }

  /* Form elements */
  label {
    display: block;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: var(--text-muted);
    margin-bottom: 6px;
    font-weight: 500;
  }

  input, select {
    width: 100%;
    background: var(--bg-input);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 10px 14px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
    color: var(--text-primary);
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
    margin-bottom: 12px;
  }

  input:focus, select:focus {
    border-color: var(--border-focus);
    box-shadow: 0 0 0 3px var(--glow-blue);
  }

  input::placeholder {
    color: var(--text-muted);
  }

  button {
    background: linear-gradient(135deg, var(--accent-blue), #2d7bc4);
    color: #fff;
    border: none;
    border-radius: var(--radius);
    padding: 10px 20px;
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    width: 100%;
  }

  button:hover {
    filter: brightness(1.1);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(61, 143, 214, 0.3);
  }

  button:active {
    transform: translateY(0);
  }

  button.secondary {
    background: var(--bg-input);
    border: 1px solid var(--border);
    color: var(--text-secondary);
  }

  button.secondary:hover {
    border-color: var(--accent-blue);
    color: var(--text-primary);
    box-shadow: none;
  }

  /* Result display */
  .result {
    background: var(--bg-input);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 12px 14px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    color: var(--accent-cyan);
    margin-top: 12px;
    min-height: 38px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    word-break: break-all;
    position: relative;
    cursor: pointer;
    transition: border-color 0.2s;
  }

  .result:hover {
    border-color: var(--accent-cyan);
  }

  .result:empty::before {
    content: 'Result will appear here';
    color: var(--text-muted);
    font-style: italic;
  }

  .result .copy-hint {
    font-size: 10px;
    color: var(--text-muted);
    white-space: nowrap;
    flex-shrink: 0;
  }

  .result.copied {
    border-color: var(--accent-green);
  }

  .result.copied .copy-hint {
    color: var(--accent-green);
  }

  .result-multi {
    background: var(--bg-input);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 14px;
    margin-top: 12px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
  }

  .result-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 0;
    border-bottom: 1px solid rgba(30, 42, 58, 0.5);
    cursor: pointer;
    transition: color 0.2s;
  }

  .result-row:last-child { border-bottom: none; }

  .result-row:hover { color: var(--accent-cyan); }

  .result-row .rr-label {
    color: var(--text-muted);
    font-size: 11px;
    min-width: 80px;
  }

  .result-row .rr-value {
    color: var(--text-secondary);
    text-align: right;
    word-break: break-all;
  }

  .result-row:hover .rr-value {
    color: var(--accent-cyan);
  }

  /* Diff result */
  .diff-result {
    text-align: center;
    padding: 16px;
    margin-top: 12px;
  }

  .diff-big {
    font-family: 'JetBrains Mono', monospace;
    font-size: 28px;
    font-weight: 700;
    color: var(--accent-amber);
    margin-bottom: 4px;
  }

  .diff-detail {
    font-size: 12px;
    color: var(--text-secondary);
    font-family: 'JetBrains Mono', monospace;
  }

  /* Full width card */
  .card-full {
    grid-column: 1 / -1;
  }

  .inline-group {
    display: flex;
    gap: 10px;
    align-items: flex-end;
  }

  .inline-group > div { flex: 1; }

  /* Quick actions */
  .quick-actions {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-top: 8px;
  }

  .quick-btn {
    background: var(--bg-input);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 6px 12px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s;
    width: auto;
  }

  .quick-btn:hover {
    border-color: var(--accent-blue);
    color: var(--text-primary);
    background: rgba(61, 143, 214, 0.08);
    transform: none;
    box-shadow: none;
    filter: none;
  }

  /* Toast */
  .toast {
    position: fixed;
    bottom: 24px;
    right: 24px;
    background: var(--bg-card);
    border: 1px solid var(--accent-green);
    border-radius: var(--radius);
    padding: 10px 18px;
    font-size: 13px;
    color: var(--accent-green);
    z-index: 100;
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.3s;
    pointer-events: none;
    font-family: 'JetBrains Mono', monospace;
  }

  .toast.show {
    opacity: 1;
    transform: translateY(0);
  }

  /* Animations */
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slideUp {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Scrollbar */
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: var(--bg-primary); }
  ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
</style>
</head>
<body>
<div class="app">
  <!-- Header -->
  <div class="header">
    <h1>⏱ Timestamp <span>Workshop</span></h1>
    <p>Convert, compare, and inspect timestamps</p>
  </div>

  <!-- Live Clock -->
  <div class="live-clock">
    <div class="clock-label">Current Unix Timestamp</div>
    <div class="clock-unix" id="liveUnix"></div>
    <div class="clock-human" id="liveHuman"></div>
    <div class="clock-formats">
      <div class="clock-chip" onclick="copyText(Math.floor(Date.now()/1000).toString())" title="Copy Unix seconds">
        <span class="chip-label">sec</span><span id="chipSec"></span>
      </div>
      <div class="clock-chip" onclick="copyText(Date.now().toString())" title="Copy Unix milliseconds">
        <span class="chip-label">ms</span><span id="chipMs"></span>
      </div>
      <div class="clock-chip" onclick="copyText(new Date().toISOString())" title="Copy ISO 8601">
        <span class="chip-label">ISO</span><span id="chipIso"></span>
      </div>
      <div class="clock-chip" onclick="copyText(new Date().toUTCString())" title="Copy UTC string">
        <span class="chip-label">UTC</span><span id="chipUtc"></span>
      </div>
    </div>
  </div>

  <!-- Tool Grid -->
  <div class="tool-grid">

    <!-- Timestamp → Date -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon blue">→</div>
        <div>
          <div class="card-title">Timestamp → Date</div>
          <div class="card-subtitle">Unix epoch to human-readable</div>
        </div>
      </div>
      <label>Unix Timestamp</label>
      <input type="text" id="ts2dateInput" placeholder="e.g. 1700000000 or 1700000000000" oninput="convertTs2Date()">
      <div class="quick-actions">
        <button class="quick-btn" onclick="document.getElementById('ts2dateInput').value=Math.floor(Date.now()/1000);convertTs2Date()">Now (s)</button>
        <button class="quick-btn" onclick="document.getElementById('ts2dateInput').value=Date.now();convertTs2Date()">Now (ms)</button>
        <button class="quick-btn" onclick="document.getElementById('ts2dateInput').value='0';convertTs2Date()">Epoch</button>
      </div>
      <div class="result-multi" id="ts2dateResult" style="display:none;"></div>
    </div>

    <!-- Date → Timestamp -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon amber">←</div>
        <div>
          <div class="card-title">Date → Timestamp</div>
          <div class="card-subtitle">Human-readable to Unix epoch</div>
        </div>
      </div>
      <label>Date & Time</label>
      <input type="datetime-local" id="date2tsInput" step="1" onchange="convertDate2Ts()">
      <div class="quick-actions">
        <button class="quick-btn" onclick="setDate2TsNow()">Now</button>
        <button class="quick-btn" onclick="setDate2Ts('2000-01-01T00:00:00')">Y2K</button>
        <button class="quick-btn" onclick="setDate2Ts('2038-01-19T03:14:07')">Y2038</button>
      </div>
      <div class="result-multi" id="date2tsResult" style="display:none;"></div>
    </div>

    <!-- Time Difference -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon green">⇔</div>
        <div>
          <div class="card-title">Time Difference</div>
          <div class="card-subtitle">Delta between two timestamps</div>
        </div>
      </div>
      <div class="inline-group">
        <div>
          <label>From</label>
          <input type="text" id="diffFrom" placeholder="Timestamp A">
        </div>
        <div>
          <label>To</label>
          <input type="text" id="diffTo" placeholder="Timestamp B">
        </div>
      </div>
      <button onclick="calcDiff()">Calculate Difference</button>
      <div class="quick-actions" style="margin-top:8px;">
        <button class="quick-btn" onclick="document.getElementById('diffTo').value=Math.floor(Date.now()/1000)">Set "To" = Now</button>
      </div>
      <div id="diffResult"></div>
    </div>

    <!-- Add/Subtract Time -->
    <div class="card">
      <div class="card-header">
        <div class="card-icon purple">±</div>
        <div>
          <div class="card-title">Add / Subtract Time</div>
          <div class="card-subtitle">Offset a timestamp</div>
        </div>
      </div>
      <label>Base Timestamp</label>
      <input type="text" id="offsetBase" placeholder="Unix timestamp (s or ms)">
      <div class="inline-group">
        <div>
          <label>Amount</label>
          <input type="number" id="offsetAmount" placeholder="e.g. 30" value="0">
        </div>
        <div>
          <label>Unit</label>
          <select id="offsetUnit">
            <option value="1">Seconds</option>
            <option value="60">Minutes</option>
            <option value="3600" selected>Hours</option>
            <option value="86400">Days</option>
            <option value="604800">Weeks</option>
            <option value="2592000">Months (30d)</option>
            <option value="31536000">Years (365d)</option>
          </select>
        </div>
      </div>
      <div style="display:flex;gap:8px;">
        <button onclick="calcOffset(1)" style="flex:1;">+ Add</button>
        <button onclick="calcOffset(-1)" style="flex:1;" class="secondary">− Subtract</button>
      </div>
      <div class="quick-actions">
        <button class="quick-btn" onclick="document.getElementById('offsetBase').value=Math.floor(Date.now()/1000)">Base = Now</button>
      </div>
      <div class="result-multi" id="offsetResult" style="display:none;"></div>
    </div>

    <!-- Format Inspector (full width) -->
    <div class="card card-full">
      <div class="card-header">
        <div class="card-icon blue">⚙</div>
        <div>
          <div class="card-title">Format Inspector</div>
          <div class="card-subtitle">Parse any date string and display in every format</div>
        </div>
      </div>
      <label>Enter any date/time string</label>
      <input type="text" id="inspectInput" placeholder='e.g. "Feb 18 2026 3:30pm", "2026-02-18", "1740000000"' oninput="inspectDate()">
      <div class="result-multi" id="inspectResult" style="display:none;"></div>
    </div>
  </div>
</div>

<!-- Toast -->
<div class="toast" id="toast">Copied to clipboard</div>

<script>
  // ---- Utilities ----
  function showToast(msg = 'Copied to clipboard') {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.classList.add('show');
    clearTimeout(t._timer);
    t._timer = setTimeout(() => t.classList.remove('show'), 1500);
  }

  function copyText(text) {
    navigator.clipboard.writeText(text).then(() => showToast());
  }

  function isMs(ts) {
    return ts > 1e12;
  }

  function normalizeTs(raw) {
    const n = Number(raw);
    if (isNaN(n)) return null;
    return isMs(n) ? n : n * 1000;
  }

  function formatRow(label, value) {
    return `<div class="result-row" onclick="copyText('${value.replace(/'/g, "\\'")}')">
      <span class="rr-label">${label}</span>
      <span class="rr-value">${value}</span>
    </div>`;
  }

  function dateRows(d, tsOriginal) {
    const s = Math.floor(d.getTime() / 1000);
    const ms = d.getTime();
    return [
      formatRow('Unix (s)', s.toString()),
      formatRow('Unix (ms)', ms.toString()),
      formatRow('ISO 8601', d.toISOString()),
      formatRow('UTC', d.toUTCString()),
      formatRow('Local', d.toLocaleString()),
      formatRow('Date', d.toLocaleDateString('en-US', { weekday:'long', year:'numeric', month:'long', day:'numeric' })),
      formatRow('Time', d.toLocaleTimeString()),
      formatRow('Relative', relativeTime(d)),
    ].join('');
  }

  function relativeTime(d) {
    const now = Date.now();
    const diffMs = now - d.getTime();
    const abs = Math.abs(diffMs);
    const future = diffMs < 0;
    const prefix = future ? 'in ' : '';
    const suffix = future ? '' : ' ago';

    if (abs < 1000) return 'just now';
    if (abs < 60000) return prefix + Math.floor(abs/1000) + 's' + suffix;
    if (abs < 3600000) return prefix + Math.floor(abs/60000) + 'm' + suffix;
    if (abs < 86400000) return prefix + Math.floor(abs/3600000) + 'h' + suffix;
    if (abs < 2592000000) return prefix + Math.floor(abs/86400000) + 'd' + suffix;
    if (abs < 31536000000) return prefix + Math.floor(abs/2592000000) + ' months' + suffix;
    return prefix + (abs/31536000000).toFixed(1) + ' years' + suffix;
  }

  // ---- Live Clock ----
  function updateClock() {
    const now = new Date();
    const unix = Math.floor(now.getTime() / 1000);
    document.getElementById('liveUnix').textContent = unix.toLocaleString('en-US');
    document.getElementById('liveHuman').textContent = now.toISOString();
    document.getElementById('chipSec').textContent = unix;
    document.getElementById('chipMs').textContent = now.getTime();
    document.getElementById('chipIso').textContent = now.toISOString().slice(0, 19) + 'Z';
    document.getElementById('chipUtc').textContent = now.toUTCString().slice(0, -4);
  }
  setInterval(updateClock, 100);
  updateClock();

  // ---- Timestamp → Date ----
  function convertTs2Date() {
    const raw = document.getElementById('ts2dateInput').value.trim();
    const el = document.getElementById('ts2dateResult');
    if (!raw) { el.style.display = 'none'; return; }
    const ms = normalizeTs(raw);
    if (ms === null || ms < -8.64e15 || ms > 8.64e15) {
      el.style.display = 'block';
      el.innerHTML = '<div style="color:var(--accent-red);font-size:12px;">Invalid timestamp</div>';
      return;
    }
    const d = new Date(ms);
    el.style.display = 'block';
    el.innerHTML = dateRows(d, raw);
  }

  // ---- Date → Timestamp ----
  function setDate2TsNow() {
    const now = new Date();
    const local = new Date(now.getTime() - now.getTimezoneOffset() * 60000).toISOString().slice(0, 19);
    document.getElementById('date2tsInput').value = local;
    convertDate2Ts();
  }

  function setDate2Ts(val) {
    document.getElementById('date2tsInput').value = val;
    convertDate2Ts();
  }

  function convertDate2Ts() {
    const val = document.getElementById('date2tsInput').value;
    const el = document.getElementById('date2tsResult');
    if (!val) { el.style.display = 'none'; return; }
    const d = new Date(val);
    if (isNaN(d.getTime())) {
      el.style.display = 'block';
      el.innerHTML = '<div style="color:var(--accent-red);font-size:12px;">Invalid date</div>';
      return;
    }
    el.style.display = 'block';
    el.innerHTML = dateRows(d);
  }

  // ---- Difference ----
  function calcDiff() {
    const a = normalizeTs(document.getElementById('diffFrom').value.trim());
    const b = normalizeTs(document.getElementById('diffTo').value.trim());
    const el = document.getElementById('diffResult');
    if (a === null || b === null) {
      el.innerHTML = '<div class="diff-result"><div style="color:var(--accent-red);font-size:12px;">Enter valid timestamps</div></div>';
      return;
    }
    const diffMs = Math.abs(b - a);
    const diffS = diffMs / 1000;

    const days = Math.floor(diffS / 86400);
    const hours = Math.floor((diffS % 86400) / 3600);
    const mins = Math.floor((diffS % 3600) / 60);
    const secs = Math.floor(diffS % 60);

    let bigText = '';
    if (days > 0) bigText = `${days}d ${hours}h ${mins}m`;
    else if (hours > 0) bigText = `${hours}h ${mins}m ${secs}s`;
    else if (mins > 0) bigText = `${mins}m ${secs}s`;
    else bigText = `${secs}s`;

    const totalHours = (diffS / 3600).toFixed(2);
    const totalDays = (diffS / 86400).toFixed(4);

    el.innerHTML = `<div class="diff-result">
      <div class="diff-big">${bigText}</div>
      <div class="diff-detail">${diffS.toLocaleString('en-US')} seconds · ${totalHours} hours · ${totalDays} days</div>
    </div>`;
  }

  // ---- Offset ----
  function calcOffset(sign) {
    const base = normalizeTs(document.getElementById('offsetBase').value.trim());
    const amount = Number(document.getElementById('offsetAmount').value);
    const unit = Number(document.getElementById('offsetUnit').value);
    const el = document.getElementById('offsetResult');

    if (base === null) {
      el.style.display = 'block';
      el.innerHTML = '<div style="color:var(--accent-red);font-size:12px;">Enter a valid base timestamp</div>';
      return;
    }

    const offsetMs = sign * amount * unit * 1000;
    const result = new Date(base + offsetMs);
    el.style.display = 'block';
    el.innerHTML = dateRows(result);
  }

  // ---- Inspector ----
  function inspectDate() {
    const raw = document.getElementById('inspectInput').value.trim();
    const el = document.getElementById('inspectResult');
    if (!raw) { el.style.display = 'none'; return; }

    let d;
    // Try as timestamp first
    if (/^\d+$/.test(raw)) {
      const ms = normalizeTs(raw);
      if (ms !== null) d = new Date(ms);
    }
    // Try as date string
    if (!d || isNaN(d.getTime())) {
      d = new Date(raw);
    }

    if (!d || isNaN(d.getTime())) {
      el.style.display = 'block';
      el.innerHTML = '<div style="color:var(--accent-red);font-size:12px;">Could not parse input</div>';
      return;
    }

    el.style.display = 'block';
    el.innerHTML = dateRows(d, raw);
  }

  // Set initial value for date picker
  setDate2TsNow();
</script>
</body>
</html>
