<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Codec â€” Text Encoder / Decoder</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0e1117;
    --surface: #161b22;
    --surface-hover: #1c2129;
    --border: #30363d;
    --border-active: #58a6ff;
    --text: #e6edf3;
    --text-dim: #8b949e;
    --text-muted: #484f58;
    --accent: #58a6ff;
    --accent-dim: #1f6feb;
    --green: #3fb950;
    --green-dim: rgba(63, 185, 80, 0.15);
    --orange: #d29922;
    --orange-dim: rgba(210, 153, 34, 0.15);
    --red: #f85149;
    --red-dim: rgba(248, 81, 73, 0.15);
    --mono: 'IBM Plex Mono', monospace;
    --sans: 'DM Sans', sans-serif;
    --radius: 8px;
    --radius-lg: 12px;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: var(--sans);
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Subtle grid background */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      linear-gradient(rgba(88, 166, 255, 0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(88, 166, 255, 0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  .app {
    position: relative;
    z-index: 1;
    max-width: 1200px;
    margin: 0 auto;
    padding: 32px 24px 64px;
  }

  /* Header */
  header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 32px;
    padding-bottom: 24px;
    border-bottom: 1px solid var(--border);
  }

  .logo {
    width: 40px;
    height: 40px;
    border-radius: var(--radius);
    background: linear-gradient(135deg, var(--accent-dim), var(--accent));
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--mono);
    font-weight: 600;
    font-size: 18px;
    color: #fff;
    flex-shrink: 0;
  }

  header h1 {
    font-family: var(--sans);
    font-size: 22px;
    font-weight: 700;
    letter-spacing: -0.5px;
  }

  header p {
    color: var(--text-dim);
    font-size: 14px;
    margin-left: auto;
    font-family: var(--mono);
    font-size: 12px;
  }

  /* Encoding selector */
  .encoding-bar {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    margin-bottom: 24px;
  }

  .enc-btn {
    font-family: var(--mono);
    font-size: 12.5px;
    font-weight: 500;
    padding: 8px 16px;
    border-radius: 100px;
    border: 1px solid var(--border);
    background: var(--surface);
    color: var(--text-dim);
    cursor: pointer;
    transition: all 0.15s ease;
    user-select: none;
  }

  .enc-btn:hover {
    border-color: var(--text-muted);
    color: var(--text);
    background: var(--surface-hover);
  }

  .enc-btn.active {
    border-color: var(--accent);
    color: var(--accent);
    background: rgba(88, 166, 255, 0.1);
  }

  /* Main workspace */
  .workspace {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 0;
    align-items: stretch;
    min-height: 420px;
  }

  .panel {
    display: flex;
    flex-direction: column;
  }

  .panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
  }

  .panel-label {
    font-family: var(--mono);
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--text-dim);
  }

  .panel-actions {
    display: flex;
    gap: 4px;
  }

  .icon-btn {
    width: 30px;
    height: 30px;
    border-radius: 6px;
    border: none;
    background: transparent;
    color: var(--text-dim);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s;
    font-size: 14px;
  }

  .icon-btn:hover {
    background: rgba(255,255,255,0.06);
    color: var(--text);
  }

  .icon-btn.copied {
    color: var(--green);
  }

  textarea {
    flex: 1;
    resize: none;
    border: 1px solid var(--border);
    border-top: none;
    border-radius: 0 0 var(--radius-lg) var(--radius-lg);
    background: var(--surface);
    color: var(--text);
    font-family: var(--mono);
    font-size: 13.5px;
    line-height: 1.65;
    padding: 16px;
    outline: none;
    transition: border-color 0.15s;
    min-height: 350px;
  }

  textarea:focus {
    border-color: var(--border-active);
  }

  textarea::placeholder {
    color: var(--text-muted);
  }

  /* Center controls */
  .controls {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 0 16px;
  }

  .action-btn {
    font-family: var(--mono);
    font-size: 11px;
    font-weight: 600;
    padding: 10px 20px;
    border-radius: var(--radius);
    border: 1px solid var(--border);
    background: var(--surface);
    color: var(--text);
    cursor: pointer;
    transition: all 0.15s;
    white-space: nowrap;
    display: flex;
    align-items: center;
    gap: 8px;
    min-width: 130px;
    justify-content: center;
  }

  .action-btn:hover {
    border-color: var(--accent);
    background: rgba(88, 166, 255, 0.08);
    color: var(--accent);
  }

  .action-btn .arrow {
    font-size: 16px;
    line-height: 1;
  }

  .swap-btn {
    width: 36px;
    height: 36px;
    min-width: 36px;
    padding: 0;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
  }

  /* Status bar */
  .status-bar {
    margin-top: 16px;
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 10px 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    font-family: var(--mono);
    font-size: 11.5px;
    color: var(--text-dim);
  }

  .status-bar .stat {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .status-bar .stat .dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--text-muted);
  }

  .status-bar .stat .dot.ok { background: var(--green); }
  .status-bar .stat .dot.err { background: var(--red); }

  .status-bar .spacer { flex: 1; }

  .status-msg {
    color: var(--text-dim);
  }

  .status-msg.error {
    color: var(--red);
  }

  .status-msg.success {
    color: var(--green);
  }

  /* Encoding info tooltip */
  .enc-info {
    margin-top: 16px;
    padding: 12px 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    font-size: 13px;
    color: var(--text-dim);
    line-height: 1.5;
    display: flex;
    align-items: flex-start;
    gap: 10px;
  }

  .enc-info .info-icon {
    flex-shrink: 0;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    border: 1.5px solid var(--text-muted);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 600;
    color: var(--text-muted);
    margin-top: 1px;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .workspace {
      grid-template-columns: 1fr;
      grid-template-rows: auto auto auto;
      gap: 0;
    }

    .controls {
      flex-direction: row;
      padding: 12px 0;
    }

    .swap-btn {
      transform: rotate(90deg);
    }

    textarea { min-height: 200px; }

    header { flex-wrap: wrap; }
    header p { margin-left: 0; margin-top: 4px; width: 100%; }
  }

  /* Animations */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .app > * {
    animation: fadeIn 0.35s ease both;
  }

  .app > :nth-child(2) { animation-delay: 0.05s; }
  .app > :nth-child(3) { animation-delay: 0.1s; }
  .app > :nth-child(4) { animation-delay: 0.15s; }
  .app > :nth-child(5) { animation-delay: 0.2s; }
</style>
</head>
<body>
<div class="app">
  <header>
    <div class="logo">{}</div>
    <h1>Codec</h1>
    <p>text encoder / decoder</p>
  </header>

  <div class="encoding-bar" id="encodingBar"></div>

  <div class="workspace">
    <div class="panel">
      <div class="panel-header">
        <span class="panel-label">Input</span>
        <div class="panel-actions">
          <button class="icon-btn" onclick="clearInput()" title="Clear">âœ•</button>
          <button class="icon-btn" onclick="pasteInput()" title="Paste">ğŸ“‹</button>
        </div>
      </div>
      <textarea id="inputText" placeholder="Paste or type text hereâ€¦" spellcheck="false"></textarea>
    </div>

    <div class="controls">
      <button class="action-btn" onclick="encode()">
        Encode <span class="arrow">â†’</span>
      </button>
      <button class="action-btn swap-btn" onclick="swap()" title="Swap input & output">â‡„</button>
      <button class="action-btn" onclick="decode()">
        <span class="arrow">â†</span> Decode
      </button>
    </div>

    <div class="panel">
      <div class="panel-header">
        <span class="panel-label">Output</span>
        <div class="panel-actions">
          <button class="icon-btn" onclick="clearOutput()" title="Clear">âœ•</button>
          <button class="icon-btn" id="copyBtn" onclick="copyOutput()" title="Copy">ğŸ“„</button>
        </div>
      </div>
      <textarea id="outputText" placeholder="Result will appear hereâ€¦" spellcheck="false" readonly></textarea>
    </div>
  </div>

  <div class="status-bar">
    <div class="stat">
      <span class="dot" id="statusDot"></span>
      <span id="statusMsg" class="status-msg">Ready</span>
    </div>
    <div class="spacer"></div>
    <div class="stat" id="inputLen">Input: 0 chars</div>
    <div class="stat" id="outputLen">Output: 0 chars</div>
  </div>

  <div class="enc-info">
    <span class="info-icon">i</span>
    <span id="encInfo"></span>
  </div>
</div>

<script>
const encodings = [
  {
    id: 'base64',
    label: 'Base64',
    info: 'Base64 encodes binary data as ASCII text using a 64-character alphabet (A-Z, a-z, 0-9, +, /). Commonly used for embedding data in URLs, emails, and JSON.',
    encode: (s) => btoa(unescape(encodeURIComponent(s))),
    decode: (s) => decodeURIComponent(escape(atob(s.trim())))
  },
  {
    id: 'url',
    label: 'URL',
    info: 'URL encoding (percent-encoding) replaces unsafe characters with %XX hex values. Used in query strings, form data, and URI components.',
    encode: (s) => encodeURIComponent(s),
    decode: (s) => decodeURIComponent(s.trim())
  },
  {
    id: 'url-full',
    label: 'URL (full)',
    info: 'Full URL encoding via encodeURI/decodeURI. Preserves URI-valid characters like :, /, ?, #, &, = while encoding others. Use for encoding complete URLs.',
    encode: (s) => encodeURI(s),
    decode: (s) => decodeURI(s.trim())
  },
  {
    id: 'html',
    label: 'HTML Entities',
    info: 'HTML entity encoding converts special characters to named or numeric entities (e.g., &amp; â†’ &amp;amp;). Essential for safely embedding content in HTML.',
    encode: (s) => {
      const el = document.createElement('div');
      el.textContent = s;
      return el.innerHTML;
    },
    decode: (s) => {
      const el = document.createElement('div');
      el.innerHTML = s;
      return el.textContent;
    }
  },
  {
    id: 'hex',
    label: 'Hex',
    info: 'Hexadecimal encoding represents each byte as two hex digits. Common in debugging, cryptography, and low-level data inspection.',
    encode: (s) => Array.from(new TextEncoder().encode(s)).map(b => b.toString(16).padStart(2, '0')).join(' '),
    decode: (s) => {
      const bytes = s.trim().split(/[\s,]+/).map(h => parseInt(h, 16));
      return new TextDecoder().decode(new Uint8Array(bytes));
    }
  },
  {
    id: 'binary',
    label: 'Binary',
    info: 'Binary encoding represents each byte as 8 bits (0s and 1s). Useful for understanding data at the bit level.',
    encode: (s) => Array.from(new TextEncoder().encode(s)).map(b => b.toString(2).padStart(8, '0')).join(' '),
    decode: (s) => {
      const bytes = s.trim().split(/[\s,]+/).map(b => parseInt(b, 2));
      return new TextDecoder().decode(new Uint8Array(bytes));
    }
  },
  {
    id: 'unicode',
    label: 'Unicode Escape',
    info: 'Unicode escape sequences represent characters as \\uXXXX codes. Used in JavaScript, JSON, and other languages for non-ASCII characters.',
    encode: (s) => Array.from(s).map(c => {
      const cp = c.codePointAt(0);
      if (cp > 0xFFFF) return '\\u{' + cp.toString(16) + '}';
      if (cp > 127) return '\\u' + cp.toString(16).padStart(4, '0');
      return c;
    }).join(''),
    decode: (s) => s.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([0-9a-fA-F]{4})/g, (_, p1, p2) =>
      String.fromCodePoint(parseInt(p1 || p2, 16))
    )
  },
  {
    id: 'rot13',
    label: 'ROT13',
    info: 'ROT13 shifts each letter 13 positions in the alphabet. A simple symmetric cipher â€” encoding and decoding are the same operation.',
    encode: (s) => s.replace(/[a-zA-Z]/g, c => {
      const base = c <= 'Z' ? 65 : 97;
      return String.fromCharCode(((c.charCodeAt(0) - base + 13) % 26) + base);
    }),
    decode: null // same as encode, set below
  },
  {
    id: 'jwt',
    label: 'JWT Decode',
    info: 'Decodes JSON Web Token payloads (the middle section). JWTs are Base64url-encoded JSON used for authentication and authorization.',
    encode: null,
    decode: (s) => {
      const parts = s.trim().split('.');
      if (parts.length !== 3) throw new Error('Invalid JWT: expected 3 dot-separated parts');
      const header = JSON.parse(atob(parts[0].replace(/-/g,'+').replace(/_/g,'/')));
      const payload = JSON.parse(atob(parts[1].replace(/-/g,'+').replace(/_/g,'/')));
      return JSON.stringify({ header, payload }, null, 2);
    }
  }
];

// ROT13 is symmetric
encodings.find(e => e.id === 'rot13').decode = encodings.find(e => e.id === 'rot13').encode;

let activeEncoding = 'base64';

// Build encoding buttons
const bar = document.getElementById('encodingBar');
encodings.forEach(enc => {
  const btn = document.createElement('button');
  btn.className = 'enc-btn' + (enc.id === activeEncoding ? ' active' : '');
  btn.textContent = enc.label;
  btn.dataset.id = enc.id;
  btn.onclick = () => selectEncoding(enc.id);
  bar.appendChild(btn);
});

updateInfo();

function selectEncoding(id) {
  activeEncoding = id;
  document.querySelectorAll('.enc-btn').forEach(b => {
    b.classList.toggle('active', b.dataset.id === id);
  });
  updateInfo();
}

function updateInfo() {
  const enc = encodings.find(e => e.id === activeEncoding);
  const info = document.getElementById('encInfo');
  let extra = '';
  if (!enc.encode) extra = ' (decode only)';
  if (!enc.decode) extra = ' (encode only)';
  info.textContent = enc.info + extra;
}

function getEncoding() {
  return encodings.find(e => e.id === activeEncoding);
}

function setStatus(msg, type = '') {
  const dot = document.getElementById('statusDot');
  const msgEl = document.getElementById('statusMsg');
  dot.className = 'dot' + (type === 'error' ? ' err' : type === 'success' ? ' ok' : '');
  msgEl.className = 'status-msg' + (type ? ' ' + type : '');
  msgEl.textContent = msg;
}

function updateCounts() {
  document.getElementById('inputLen').textContent = 'Input: ' + document.getElementById('inputText').value.length + ' chars';
  document.getElementById('outputLen').textContent = 'Output: ' + document.getElementById('outputText').value.length + ' chars';
}

function encode() {
  const enc = getEncoding();
  if (!enc.encode) {
    setStatus(`${enc.label} is decode-only`, 'error');
    return;
  }
  const input = document.getElementById('inputText').value;
  if (!input) {
    setStatus('Nothing to encode', 'error');
    return;
  }
  try {
    const result = enc.encode(input);
    document.getElementById('outputText').value = result;
    setStatus(`Encoded with ${enc.label}`, 'success');
    updateCounts();
  } catch (e) {
    setStatus(`Encode error: ${e.message}`, 'error');
  }
}

function decode() {
  const enc = getEncoding();
  if (!enc.decode) {
    setStatus(`${enc.label} is encode-only`, 'error');
    return;
  }
  const input = document.getElementById('inputText').value;
  if (!input) {
    setStatus('Nothing to decode', 'error');
    return;
  }
  try {
    const result = enc.decode(input);
    document.getElementById('outputText').value = result;
    setStatus(`Decoded with ${enc.label}`, 'success');
    updateCounts();
  } catch (e) {
    setStatus(`Decode error: ${e.message}`, 'error');
  }
}

function swap() {
  const inp = document.getElementById('inputText');
  const out = document.getElementById('outputText');
  const tmp = inp.value;
  inp.value = out.value;
  out.value = tmp;
  setStatus('Swapped', 'success');
  updateCounts();
}

function clearInput() {
  document.getElementById('inputText').value = '';
  setStatus('Input cleared');
  updateCounts();
}

function clearOutput() {
  document.getElementById('outputText').value = '';
  setStatus('Output cleared');
  updateCounts();
}

async function copyOutput() {
  const text = document.getElementById('outputText').value;
  if (!text) return;
  try {
    await navigator.clipboard.writeText(text);
    const btn = document.getElementById('copyBtn');
    btn.classList.add('copied');
    btn.textContent = 'âœ“';
    setStatus('Copied to clipboard', 'success');
    setTimeout(() => {
      btn.classList.remove('copied');
      btn.textContent = 'ğŸ“„';
    }, 1500);
  } catch {
    setStatus('Copy failed â€” use Ctrl+C', 'error');
  }
}

async function pasteInput() {
  try {
    const text = await navigator.clipboard.readText();
    document.getElementById('inputText').value = text;
    setStatus('Pasted from clipboard', 'success');
    updateCounts();
  } catch {
    setStatus('Paste failed â€” use Ctrl+V', 'error');
  }
}

// Live char counts
document.getElementById('inputText').addEventListener('input', updateCounts);
document.getElementById('outputText').addEventListener('input', updateCounts);

// Keyboard shortcuts
document.addEventListener('keydown', (e) => {
  if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
    e.preventDefault();
    encode();
  }
  if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'Enter') {
    e.preventDefault();
    decode();
  }
});
</script>
</body>
</html>
